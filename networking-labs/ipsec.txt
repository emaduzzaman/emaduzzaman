                                    ğŸŒ Internet
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚        WAN/ISP         â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â–²        â–²
                                     â”‚        â”‚
                           Public IP â”‚        â”‚Public IP
                        115.42.10.1  â”‚        â”‚116.25.20.1
                                     â”‚        â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                       IPSec Tunnel                        â”‚
            â”‚      (Encrypted channel between both routers)             â”‚
            â”‚     Source: 192.168.20.0/24 â†” Destination: 172.10.15.0/24 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     Phase 1 (IKE SA)          Phase 2 (IPSec SA)
                      |----------------|        |------------------|
                      | Authentication |        | Data Encryption  |
                      | DH Key Exchange|        | Tunnel Creation  |
                      | Encryption Algo|        | Traffic Selectors|
                      | Lifetime etc.  |        | ESP/AH Protocols |
                      |----------------|        |------------------|

            ğŸ¢ OFFICE A (Dhaka)                               ğŸ¢ OFFICE B (Barishal)
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Office-Router-A       â”‚                         â”‚ Office-Router-B       â”‚
         â”‚ (192.168.10.1)        â”‚                         â”‚ (172.10.5.1)          â”‚
         â”‚                       â”‚                         â”‚                       â”‚
         â”‚ LAN1: 192.168.10.0/24 â”‚â—„â”€â”€Switch A1â”€â”€â–ºLocal PCs â”‚ LAN1: 172.10.5.0/24   â”‚â—„â”€â”€Switch B1â”€â”€â–ºLocal PCs
         â”‚ LAN2: 192.168.20.0/24 â”‚â—„â”€â”€Switch A2â”€â”€â–ºTech PCs  â”‚ LAN2: 172.10.15.0/24  â”‚â—„â”€â”€Switch B2â”€â”€â–ºTech PCs
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         Example Devices:
         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         Switch A1 PCs:                                    Switch B1 PCs:
         192.168.10.10, .11, .12                           172.10.5.10, .11, .12  (local only)
         Switch A2 PCs:                                    Switch B2 PCs:
         192.168.20.10 â†’ can reach â†’ 172.10.15.10          172.10.15.10 â†’ can reach â†’ 192.168.20.10
        (through IPSec tunnel)                             (through IPSec tunnel)
